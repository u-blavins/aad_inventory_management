{% extends "home.html" %}
{% block content %}

    <div class="container text-center">
        <br>
        <h3>View & edit stock</h3>
        <br>
        <br>
        <input type="text" placeholder="Search for items..." class="inputShadowBox">
        <br>
        <br>
        {% if 'privilege' in session %}
            {% if session['privilege'] == 3 %}
                <a href="/admin/add-stock" id="addItem" class="greenButton"><i class="fas fa-plus-circle" style="margin-right:5px;"></i>Add Item </a>
            {% else %}
            {% endif %}
        {% endif %}
        <br>
        <br>
        <div class="table-responsive">
        <table class="table">
            <thread>
                <tr>
                  <th>Item Code</th>
                  <th>Item Name</th>
                  <th>Quantity</th>
                  <th>Risk Item</th>
                  <th></th>
                {% if 'privilege' in session %}
                    {% if session['privilege'] == 3 %}
                        <th></th>
                    {% else %}
                    {% endif %}
                {% endif %}
                </tr>
            </thread>
            {% for item in items %}
                {% if item.get_threshold() >= item.get_quantity() %}
                    <tr bgcolor="#FF6464">
                {% else %}
                    <tr>
                {% endif %}
                        <td>{{ item.get_code() }}</td>
                        <td>{{ item.get_name() }}</td>
                        <td>{{ item.get_quantity() }}</td>
                        <td>{{ item.get_risk() }}</td>
                        <td><button onclick= edit(item) class="editButton"><i class="fa fa-edit" style="margin-right: 5px;"></i>Edit</button></td>
                        {% if 'privilege' in session %}
                            {% if session['privilege'] == 3 %}
                            <td><button onclick= remove(item) class="redButton"><i class="fas fa-minus-circle" style="margin-right: 5px;"></i>Remove</button></td>
                            {% else %}
                            {% endif %}
                        {% endif %}
                    </tr> 
            {% endfor %}
        </table>
    </div>
</div>

<!-- <script>

        function edit(indice) {
            var htmltext = "<tr><td><input id='inputProductId"+indice+"' type='text' value='"
                +StockData[indice].ProductId+

                "'></td><td><input id='inputProductName"+indice+"' type='text' value='"
                +StockData[indice].ProductName+

                "'></td><td><input id='inputQuantity"+indice+"' type='number' value='"
                +StockData[indice].Quantity+

                "'></td><td><input id='inputLocation"+indice+"' type='number' value='"
                +StockData[indice].Location+

                "'></td><td><input id='inputRiskItem"+indice+"' type='text' value='"
                +StockData[indice].RiskItem+

                "'></td><td><button onclick='save("+indice+")'>Save</button><button onclick='remove("+indice+")'>Remove</button></td></tr>";
            document.getElementById("table"+indice).innerHTML = htmltext;
        }

        function save(indice) {
            var values = new Array();

            //BasketData2[indice].ProductId = document.getElementById("inputProductId"+indice).value;
            values.push("'" + StockData[indice].ProductId[0].value + "'");

            StockData[indice].ProductName = document.getElementById("inputProductName"+indice).value;
            values.push("'" + StockData[indice].ProductName + "'");

            StockData[indice].Quantity = document.getElementById("inputQuantity"+indice).value;
            values.push("'" + StockData.Quantity + "'");

            StockData[indice].Location = document.getElementById("inputLocation"+indice).value;
            values.push("'" + StockData.Location + "'");
            
            StockData[indice].Price = document.getElementById("inputRiskItem"+indice).value;
            values.push("'" + StockData.RiskItem + "'");

            var htmltext = "<tr id='table"+indice+"'><td>"
                +StockData[indice].ProductId+
                "</td><td>"
                +StockData[indice].ProductName+
                "</td><td>"
                +StockData[indice].Quantity+
                "</td><td>"
                +StockData[indice].RiskItem+
                "</td><td><button onclick='edit("
                +indice+")'>Edit</button><button onclick='remove("
                +indice+")'>Remove</button></td></tr>";
            document.getElementById("table"+indice).innerHTML = htmltext;
        }



        function remove(indice) {
            StockData.splice(indice, 1);
            display();
        }
  
  </script> -->
{% endblock %}