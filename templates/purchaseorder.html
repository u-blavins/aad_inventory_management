{% extends "home.html" %}

{% block content %}
    <div class="container">
		{% if 'privilege' in session %}
			{% if session['privilege'] == 3 %}
			<br>
			<a class="editButton" href="/admin"><i class="fas fa-chevron-circle-left" style="margin-right: 5px;"></i> Back</a> 
			<div class="text-center">
			<h3>Create Purchase Order</h3>
				<hr>
				<button id="addPurchaseOrderRow" class="adminButton addButton" onclick="addPurchaseOrderRow()"><i class="fas fa-plus-circle" style="margin-right: 5px;"></i> Add Item </button>

				<form id="" method="POST" action="/admin/purchase-order/create">
					<div id="purchase-order-cont" class="text-center"></div>
					<br>
					<button class="greenButton" onclick="submitPurchaseOrder()" href="">Create Purchase Order<i class="fas fa-long-arrow-alt-right" style="margin-left: 5px;"></i></button>
					<br>
				</form>
			{% endif %}
		{% endif %}
		<br>
		<br>
		<br>
		<h3>Pending Purchase Orders</h3>
	    <hr>
        <div class="table-responsive">
		    <table class="table">
		        <thread>
			        <tr>
				        <th>Purchase Order ID</th>
				        <th>Generated By</th>
				        <th>Generated Date</th>
				        <th></th>
						<th></th>
			        </tr>
		        </thread>
		        <tbody id="Pending">
				{% for purchase_order in pending %}
					<tr>
						<td>{{purchase_order.purchase_order_id}}</td>
						<td>{{purchase_order.generated_by}}</td>
						<td>{{purchase_order.generated_date}}</td>
                        <td>
                            <form method="GET" action="/admin/purchase-order/{{purchase_order.purchase_order_id}}">
                                <button type="submit" class="adminButton"><i class="fas fa-search"></i> View</button>
                            </form>
                        </td>
						<td>
							<form method="GET" action="/admin/purchase-order/download/{{purchase_order.purchase_order_id}}">
                                <button type="submit" class="adminButton"><i class="fas fa-cloud-download-alt"></i> Download</button>
                            </form>
						</td>
					</tr>
				{% endfor %}
		        </tbody>
	        </table>
	    </div>
		<br>
		<br>
	    <h3>Completed Purchase Orders</h3>
	    <hr>
        <div class="table-responsive">
		    <table class="table">
		        <thread>
			        <tr>
				        <th>Purchase Order ID</th>
				        <th>Generated By</th>
				        <th>Generated Date</th>
						<th>Completed Date</th>
				        <th></th>
						<th></th>
			        </tr>
		        </thread>
		        <tbody id="PurchaseOrderHistory">
				{% for purchase_order in history %}
					<tr>
							<td>{{purchase_order.purchase_order_id}}</td>
							<td>{{purchase_order.generated_by}}</td>
							<td>{{purchase_order.generated_date}}</td>
							<td>{{purchase_order.completion_date}}</td>
							<td>
								<form method="GET" action="/admin/purchase-order/{{purchase_order.purchase_order_id}}">
									<button type="submit" class="adminButton" style="padding: 2px 7px;"><i class="fas fa-search"></i> View</button>
								</form>
							</td>
							<td>
								<form method="GET" action="/admin/purchase-order/download/{{purchase_order.purchase_order_id}}">
									<button type="submit" class="adminButton" style="padding: 2px 7px;"><i class="fas fa-cloud-download-alt"></i> Download</button>
								</form>
							</td>
					</tr>
				{% endfor %}
		        </tbody>
	        </table>
		</div>
		<script type="text/javascript">
			createTable();
		</script>
	</div>
	</div>
{% endblock %}